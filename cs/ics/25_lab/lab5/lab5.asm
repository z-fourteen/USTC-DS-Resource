.ORIG x3000

LEA R0, BEGIN
TRAP x30
TRAP x24
HALT

BEGIN    .FILL x61
    .FILL x62
    .FILL x63
    .FILL x64
    .FILL x65
    .FILL x66
    .FILL x67
    .FILL x68
    .FILL x69
    .FILL x6A
    .FILL x6B
    .FILL x6C
    .FILL x6D
    .FILL x6E
    .FILL x6F
    .FILL x70
    .FILL x71
    .FILL x72
    .FILL x73
    .FILL x74
LD  R1, PROG_ADDR
JMP R1
PROG_ADDR .FILL x4000
        .FILL x0
.END


.ORIG x30
.FILL x930
.END

.ORIG x930
ST R0, SAVED_R0
ST R1, SAVED_R1
ST R2, SAVED_R2
LD R1, PROMPT_ADDR
LOOP
LDR R2, R0, x0
STR R2, R1, x0
BRz LEAVE
ADD R0, R0, x1
ADD R1, R1, x1
BR LOOP
LD R0, SAVED_R0
LD R1, SAVED_R1
LD R2, SAVED_R2
LEAVE RTI
PROMPT_ADDR .FILL x032c
SAVED_R0 .BLKW 1
SAVED_R1 .BLKW 1
SAVED_R2 .BLKW 1
.END


.ORIG x4000
LDI R0, ADDR
LEA R0, WOW
PUTS
HALT
ADDR .FILL x1
WOW .STRINGZ "I made it!"
.END